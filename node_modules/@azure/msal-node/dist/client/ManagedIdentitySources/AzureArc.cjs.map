{"version":3,"file":"AzureArc.cjs","sources":["../../../src/client/ManagedIdentitySources/AzureArc.ts"],"sourcesContent":[null],"names":["BaseManagedIdentitySource","ManagedIdentityEnvironmentVariableNames","accessSync","fsConstants","ManagedIdentitySourceNames","ManagedIdentityIdType","createManagedIdentityError","ManagedIdentityErrorCodes.unableToCreateAzureArc","ManagedIdentityRequestParameters","HttpMethod","METADATA_HEADER_NAME","API_VERSION_QUERY_PARAMETER_NAME","RESOURCE_BODY_OR_QUERY_PARAMETER_NAME","HttpStatus","ManagedIdentityErrorCodes.wwwAuthenticateHeaderMissing","ManagedIdentityErrorCodes.wwwAuthenticateHeaderUnsupportedFormat","ManagedIdentityErrorCodes.platformNotSupported","ManagedIdentityErrorCodes.invalidFileExtension","ManagedIdentityErrorCodes.invalidFilePath","statSync","ManagedIdentityErrorCodes.unableToReadSecretFile","AZURE_ARC_SECRET_FILE_MAX_SIZE_BYTES","ManagedIdentityErrorCodes.invalidSecret","readFileSync","AUTHORIZATION_HEADER_NAME","AuthError","createClientAuthError","ClientAuthErrorCodes"],"mappings":"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"}